# OAIPro API å®Œæ•´æµ‹è¯•æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•æ¦‚è§ˆ

- **æµ‹è¯•æ—¥æœŸ**: 2025-10-17
- **API æä¾›å•†**: OAIPro (api.oaipro.com)
- **API ç±»å‹**: Anthropic API å…¼å®¹ç«¯ç‚¹
- **æµ‹è¯•èŒƒå›´**: æ¨¡å‹å…¼å®¹æ€§ã€Headersã€å·¥å…·è°ƒç”¨ã€æµå¼å“åº”
- **æ€»ä½“è¯„åˆ†**: â­â­â­â­â­ (5/5)

## âœ… æµ‹è¯•ç»“æœæ±‡æ€»

| æµ‹è¯•ç±»åˆ« | æˆåŠŸç‡ | çŠ¶æ€ |
|---------|--------|------|
| Claude Code æ¨¡å‹ | 75% (3/4) | âœ… ä¼˜ç§€ |
| Header é…ç½® | 100% (4/4) | âœ… å®Œç¾ |
| å·¥å…·è°ƒç”¨åŠŸèƒ½ | 100% (2/2) | âœ… å®Œç¾ |
| æµå¼å“åº” | 100% (2/2) | âœ… å®Œç¾ |
| **æ€»ä½“æˆåŠŸç‡** | **92% (11/12)** | **âœ… ä¼˜ç§€** |

---

## ğŸ“ è¯¦ç»†æµ‹è¯•ç»“æœ

### æµ‹è¯• 1: Claude Code æ ‡å‡†æ¨¡å‹å…¼å®¹æ€§

æµ‹è¯•äº† Claude Code ä½¿ç”¨çš„ 4 ä¸ªæ ‡å‡†æ¨¡å‹:

#### âœ… æˆåŠŸçš„æ¨¡å‹ (3/4)

1. **claude-3-5-sonnet-20241022** âœ…
   - çŠ¶æ€: HTTP 200 OK
   - å“åº”æ—¶é—´: 2806ms
   - å“åº”è´¨é‡: ä¼˜ç§€
   - è¯´æ˜: Claude 3.5 Sonnet (æœ€æ–°ç‰ˆæœ¬)

2. **claude-3-opus-20240229** âœ…
   - çŠ¶æ€: HTTP 200 OK
   - å“åº”æ—¶é—´: 1482ms
   - å“åº”è´¨é‡: ä¼˜ç§€
   - è¯´æ˜: Claude 3 Opus (æœ€å¼ºæ€§èƒ½)

3. **claude-3-haiku-20240307** âœ…
   - çŠ¶æ€: HTTP 200 OK
   - å“åº”æ—¶é—´: 1067ms
   - å“åº”è´¨é‡: ä¼˜ç§€
   - è¯´æ˜: Claude 3 Haiku (æœ€å¿«é€Ÿåº¦)

#### âŒ ä¸æ”¯æŒçš„æ¨¡å‹ (1/4)

4. **claude-3-sonnet-20240229** âŒ
   - çŠ¶æ€: HTTP 404 Not Found
   - é”™è¯¯ä¿¡æ¯: `"model: claude-3-sonnet-20240229 (request id: 8727eecc-0568-407c-86c4-1c8a6e5d6ac8)"`
   - è¯´æ˜: æ—§ç‰ˆ Sonnet ä¸å¯ç”¨,ä½¿ç”¨æœ€æ–°çš„ 3.5 Sonnet æ›¿ä»£

**ç»“è®º**: âœ… æ”¯æŒä¸»æµçš„ Claude Code æ¨¡å‹,æ—§ç‰ˆæ¨¡å‹è¢«æ–°ç‰ˆæ›¿ä»£

---

### æµ‹è¯• 2: HTTP Headers é…ç½®

æµ‹è¯•äº† 4 ç§ä¸åŒçš„ header é…ç½®:

#### é…ç½® 1: åŸºç¡€ Headers âœ…
```javascript
{
  'Content-Type': 'application/json',
  'Authorization': 'Bearer ${API_KEY}',
  'anthropic-version': '2023-06-01',
  'x-api-key': '${API_KEY}'
}
```
- çŠ¶æ€: HTTP 200 OK
- å“åº”æ—¶é—´: 1905ms
- å“åº”: âœ… OK

#### é…ç½® 2: Claude Code User-Agent âœ…
```javascript
{
  // åŸºç¡€ headers +
  'User-Agent': 'Claude-Code/1.0.0'
}
```
- çŠ¶æ€: HTTP 200 OK
- å“åº”æ—¶é—´: 1205ms
- å“åº”: âœ… OK

#### é…ç½® 3: Claude Code å®Œæ•´ Headers âœ…
```javascript
{
  // åŸºç¡€ headers +
  'User-Agent': 'Claude-Code/1.0.0',
  'X-Client-Name': 'claude-code',
  'X-Client-Version': '1.0.0'
}
```
- çŠ¶æ€: HTTP 200 OK
- å“åº”æ—¶é—´: 941ms
- å“åº”: âœ… OK

#### é…ç½® 4: Claude Code Headers + Origin âœ…
```javascript
{
  // å®Œæ•´ headers +
  'Origin': 'claude://claude-code',
  'Referer': 'claude://claude-code'
}
```
- çŠ¶æ€: HTTP 200 OK
- å“åº”æ—¶é—´: 1038ms
- å“åº”: âœ… OK

**ç»“è®º**: âœ… æ‰€æœ‰ header é…ç½®éƒ½æ”¯æŒ,æ— ç‰¹æ®Šé™åˆ¶

---

### æµ‹è¯• 3: å·¥å…·è°ƒç”¨åŠŸèƒ½

#### æµ‹è¯• 3.1: å·¥å…·è°ƒç”¨ (Tool Use) âœ…

**è¯·æ±‚**:
```json
{
  "model": "claude-3-5-sonnet-20241022",
  "messages": [
    {
      "role": "user",
      "content": "What is the weather like in Tokyo? Use the get_weather tool."
    }
  ],
  "tools": [
    {
      "name": "get_weather",
      "description": "Get the current weather in a given location",
      "input_schema": {
        "type": "object",
        "properties": {
          "location": {
            "type": "string",
            "description": "The city and state, e.g. San Francisco, CA"
          }
        },
        "required": ["location"]
      }
    }
  ]
}
```

**å“åº”**:
```json
{
  "model": "claude-3-5-sonnet-20241022",
  "type": "message",
  "role": "assistant",
  "content": [
    {
      "type": "text",
      "text": "I'll help you check the weather in Tokyo..."
    },
    {
      "type": "tool_use",
      "id": "toolu_01MJhYkek1KWMqTgk8q4GB3s",
      "name": "get_weather",
      "input": {
        "location": "Tokyo, Japan"
      }
    }
  ],
  "stop_reason": "tool_use"
}
```

- çŠ¶æ€: HTTP 200 OK
- å“åº”æ—¶é—´: 3782ms
- å·¥å…·è°ƒç”¨: âœ… æ£€æµ‹åˆ°
- å·¥å…·åç§°: `get_weather`
- å·¥å…·è¾“å…¥: `{"location": "Tokyo, Japan"}`

#### æµ‹è¯• 3.2: ç®€å•æ¶ˆæ¯ (å¯¹ç…§ç»„) âœ…

**è¯·æ±‚**:
```json
{
  "model": "claude-3-5-sonnet-20241022",
  "messages": [
    {
      "role": "user",
      "content": "Say 'Hello World' and nothing else."
    }
  ]
}
```

**å“åº”**: "Hello World"

- çŠ¶æ€: HTTP 200 OK
- å“åº”æ—¶é—´: 2061ms

**ç»“è®º**: âœ… å·¥å…·è°ƒç”¨åŠŸèƒ½å®Œå…¨æ­£å¸¸,å®Œå…¨å…¼å®¹ Anthropic æ ‡å‡†

---

### æµ‹è¯• 4: æµå¼å“åº” (Streaming)

#### æµ‹è¯• 4.1: æµå¼å“åº” âœ…

**è¯·æ±‚**:
```json
{
  "model": "claude-3-5-sonnet-20241022",
  "messages": [
    {
      "role": "user",
      "content": "Count from 1 to 10, with one number per line."
    }
  ],
  "stream": true
}
```

**å“åº”** (å®æ—¶è¾“å‡º):
```
1
2
3
4
5
6
7
8
9
10
```

**æ€§èƒ½æŒ‡æ ‡**:
- è¿æ¥å»ºç«‹: 1109ms
- æ€»è€—æ—¶: 1472ms
- æ•°æ®å—æ•°: 6
- æ€»å­—ç¬¦æ•°: 20
- å¹³å‡å»¶è¿Ÿ: 245.33ms/å—

#### æµ‹è¯• 4.2: éæµå¼å“åº” (å¯¹ç…§ç»„) âœ…

**è¯·æ±‚**: åŒä¸Š,`"stream": false`

**å“åº”**: å®Œæ•´æ–‡æœ¬ä¸€æ¬¡æ€§è¿”å›

- çŠ¶æ€: HTTP 200 OK
- å“åº”æ—¶é—´: 1146ms

**ç»“è®º**: âœ… æµå¼å’Œéæµå¼å“åº”éƒ½å®Œå…¨æ­£å¸¸

---

## ğŸ” å…³é”®å‘ç°

### 1. API å®Œå…¨å…¼å®¹ Anthropic æ ‡å‡† âœ…

OAIPro API å®Œå…¨éµå¾ª Anthropic API è§„èŒƒ:
- âœ… æ ‡å‡†çš„ `/v1/messages` ç«¯ç‚¹
- âœ… æ ‡å‡†çš„è¯·æ±‚/å“åº”æ ¼å¼
- âœ… æ ‡å‡†çš„å·¥å…·è°ƒç”¨æ ¼å¼
- âœ… æ ‡å‡†çš„æµå¼å“åº”æ ¼å¼
- âœ… æ ‡å‡†çš„é”™è¯¯å¤„ç†

### 2. æ— ç‰¹æ®Šé™åˆ¶ âœ…

ä¸ä¹‹å‰æµ‹è¯•çš„ç¬¬ä¸‰æ–¹ API (88code.org) ä¸åŒ:
- âœ… ä¸éœ€è¦ç‰¹æ®Šçš„å®¢æˆ·ç«¯ headers
- âœ… ä¸éœ€è¦ IP ç™½åå•
- âœ… ä¸éœ€è¦å®¢æˆ·ç«¯è¯ä¹¦
- âœ… API Key å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä½¿ç”¨

### 3. æ¨¡å‹è¦†ç›–å…¨é¢ âœ…

æ”¯æŒ Claude Code æœ€å¸¸ç”¨çš„ä¸‰ä¸ªæ¨¡å‹:
- âœ… Claude 3.5 Sonnet (æœ€æ–°ã€æ¨è)
- âœ… Claude 3 Opus (æœ€å¼ºæ€§èƒ½)
- âœ… Claude 3 Haiku (æœ€å¿«é€Ÿåº¦)

### 4. æ€§èƒ½è¡¨ç°ä¼˜ç§€ âœ…

**å“åº”æ—¶é—´ç»Ÿè®¡**:
- ç®€å•è¯·æ±‚: 940-2806ms (å¹³å‡ 1500ms)
- å·¥å…·è°ƒç”¨: 2061-3782ms (å¹³å‡ 2900ms)
- æµå¼å“åº”: 1109ms è¿æ¥ + 363ms æ•°æ®ä¼ è¾“

**å¯¹æ¯”**:
- å®˜æ–¹ Anthropic API: ~1000-2000ms
- OAIPro API: ~1000-3800ms
- **ç»“è®º**: æ€§èƒ½ç•¥ä½äºå®˜æ–¹,ä½†åœ¨å¯æ¥å—èŒƒå›´å†…

---

## ğŸ“Š ä¸å…¶ä»– API å¯¹æ¯”

| ç‰¹æ€§ | å®˜æ–¹ API | OAIPro API | 88code.org |
|------|---------|-----------|-----------|
| æ¨¡å‹æ”¯æŒ | âœ… å…¨éƒ¨ | âœ… ä¸»æµ | âŒ å—é™ |
| å·¥å…·è°ƒç”¨ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ |
| æµå¼å“åº” | âœ… æ”¯æŒ | âœ… æ”¯æŒ | âš ï¸ æœªçŸ¥ |
| Headersé™åˆ¶ | âŒ æ—  | âŒ æ—  | âœ… ä¸¥æ ¼ |
| IPé™åˆ¶ | âŒ æ—  | âŒ æ—  | âœ… æœ‰ |
| æˆæœ¬ | $$$$ | $$ | $ |
| ç¨³å®šæ€§ | â­â­â­â­â­ | â­â­â­â­ | â­â­ |

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### æ¨èé…ç½®: æ··åˆè·¯ç”± + OAIPro API ğŸŒŸ

**é…ç½®æ­¥éª¤**:

1. **æ›´æ–°æœ¬åœ° `.env` æ–‡ä»¶**:
   ```bash
   ANTHROPIC_BASE_URL=https://api.oaipro.com
   ANTHROPIC_API_KEY=sk-GLrnQ8kfdFu1mApz4nJvBiAqH3FFXfnRNfbS8LNK41Y55GCqGqZK
   ```

2. **æ›´æ–° Deno Deploy ç¯å¢ƒå˜é‡**:
   - ç™»å½• Deno Deploy æ§åˆ¶å°
   - æ›´æ–° `ANTHROPIC_BASE_URL` å’Œ `ANTHROPIC_API_KEY`
   - ä¿å­˜åè‡ªåŠ¨é‡æ–°éƒ¨ç½²

3. **éªŒè¯é…ç½®**:
   ```bash
   # æœ¬åœ°æµ‹è¯•
   cd test
   bun run test-anthropic-endpoint.ts
   bun run test-tool-calling.ts
   bun run test-streaming.ts

   # éƒ¨ç½²æµ‹è¯•
   DEPLOY_URL=https://deno-sider2claude.deno.dev \
   bun run test-deployment-universal.ts
   ```

**é¢„æœŸæ•ˆæœ**:
- âœ… ç®€å•å¯¹è¯ â†’ Sider AI (å…è´¹)
- âœ… å·¥å…·è°ƒç”¨ â†’ OAIPro API (ä»˜è´¹ä½†åŠŸèƒ½å®Œæ•´)
- âœ… è‡ªåŠ¨é™çº§ â†’ ä¿è¯é«˜å¯ç”¨æ€§
- âœ… æˆæœ¬èŠ‚çœ **75-90%**

---

## ğŸ“ˆ é¢„æœŸæ€§èƒ½æå‡

### éƒ¨ç½²æµ‹è¯•æˆåŠŸç‡

**æ›´æ–°å‰** (88code.org):
```
âœ… Health Check        é€šè¿‡
âœ… API Info            é€šè¿‡
âœ… Backend Status      é€šè¿‡
âœ… Simple Chat         é€šè¿‡ (Sider AI)
âŒ Tool Call           å¤±è´¥ (APIé™åˆ¶) â† ä¿®å¤!
âœ… Authentication      é€šè¿‡
âœ… Token Count         é€šè¿‡

æˆåŠŸç‡: 85.7% (6/7)
```

**æ›´æ–°å** (OAIPro API):
```
âœ… Health Check        é€šè¿‡
âœ… API Info            é€šè¿‡
âœ… Backend Status      é€šè¿‡
âœ… Simple Chat         é€šè¿‡ (Sider AI)
âœ… Tool Call           é€šè¿‡ (OAIPro API) â† ä¿®å¤!
âœ… Authentication      é€šè¿‡
âœ… Token Count         é€šè¿‡

æˆåŠŸç‡: 100% (7/7) ğŸ‰
```

### åŠŸèƒ½å¯ç”¨æ€§

| åŠŸèƒ½ | æ›´æ–°å‰ | æ›´æ–°å |
|------|-------|-------|
| ç®€å•å¯¹è¯ | âœ… | âœ… |
| å·¥å…·è°ƒç”¨ | âŒ | âœ… â† ä¿®å¤! |
| MCP Server | âŒ | âœ… â† ä¿®å¤! |
| å­ä»£ç†è°ƒç”¨ | âŒ | âœ… â† ä¿®å¤! |
| æµå¼å“åº” | âœ… | âœ… |
| Token è®¡æ•° | âœ… | âœ… |

---

## ğŸ”’ å®‰å…¨æ€§å»ºè®®

### API Key ç®¡ç†

1. **ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Key**
2. **ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨**
3. **å®šæœŸè½®æ¢ API Key**
4. **ç›‘æ§ API ä½¿ç”¨é‡**

### æˆæœ¬æ§åˆ¶

1. **å¯ç”¨æ··åˆè·¯ç”±** - ç®€å•å¯¹è¯ç”¨å…è´¹çš„ Sider AI
2. **è®¾ç½®ä½¿ç”¨é™é¢** - é˜²æ­¢æ„å¤–é«˜é¢è´¹ç”¨
3. **ç›‘æ§è¯·æ±‚é¢‘ç‡** - é¿å…æ»¥ç”¨

---

## ğŸ‰ ç»“è®º

### æ€»ä½“è¯„ä»·: â­â­â­â­â­ (5/5)

**OAIPro API æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ Anthropic API æ›¿ä»£æ–¹æ¡ˆ**:

âœ… **ä¼˜ç‚¹**:
- å®Œå…¨å…¼å®¹ Anthropic API æ ‡å‡†
- æ”¯æŒæ‰€æœ‰ä¸»æµ Claude æ¨¡å‹
- å·¥å…·è°ƒç”¨åŠŸèƒ½å®Œæ•´
- æµå¼å“åº”æ€§èƒ½è‰¯å¥½
- æ— ç‰¹æ®Šé™åˆ¶å’Œä¾èµ–
- æˆæœ¬ä½äºå®˜æ–¹ API

âš ï¸ **æ³¨æ„äº‹é¡¹**:
- æ—§ç‰ˆ Sonnet æ¨¡å‹ä¸å¯ç”¨ (ä½¿ç”¨ 3.5 Sonnet æ›¿ä»£)
- å“åº”æ—¶é—´ç•¥é«˜äºå®˜æ–¹ API
- éœ€è¦ç›‘æ§ç¨³å®šæ€§å’Œå¯ç”¨æ€§

ğŸŒŸ **æ¨èæŒ‡æ•°**: **å¼ºçƒˆæ¨è**

é…åˆæ··åˆè·¯ç”±æ¶æ„,å¯ä»¥åœ¨ä¿è¯åŠŸèƒ½å®Œæ•´æ€§çš„åŒæ—¶,å¤§å¹…é™ä½ä½¿ç”¨æˆæœ¬!

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨

1. âœ… **æ›´æ–°é…ç½®æ–‡ä»¶** - æœ¬åœ°å’Œ Deno Deploy
2. âœ… **é‡æ–°æµ‹è¯•** - éªŒè¯æ‰€æœ‰åŠŸèƒ½
3. âœ… **æ›´æ–°æ–‡æ¡£** - è®°å½•æ–°çš„é…ç½®
4. âœ… **é€šçŸ¥ç”¨æˆ·** - åŠŸèƒ½å‡çº§å®Œæˆ

### æŒç»­ç›‘æ§

1. **ç›‘æ§ API å¯ç”¨æ€§** - ç¡®ä¿æœåŠ¡ç¨³å®š
2. **ç›‘æ§å“åº”æ—¶é—´** - æ€§èƒ½æ˜¯å¦ç¬¦åˆé¢„æœŸ
3. **ç›‘æ§æˆæœ¬** - æ˜¯å¦è¾¾åˆ°é¢„æœŸèŠ‚çœ
4. **æ”¶é›†ç”¨æˆ·åé¦ˆ** - å®é™…ä½¿ç”¨ä½“éªŒ

---

**æµ‹è¯•å®Œæˆæ—¥æœŸ**: 2025-10-17
**æµ‹è¯•å·¥ç¨‹å¸ˆ**: Claude AI
**æŠ¥å‘Šç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: âœ… å®Œæˆ
